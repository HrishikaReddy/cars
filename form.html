<!-- Save as form.html -->
<!doctype html>
<html lang="en">
<head>
  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P7XLQSKZ');</script>
<!-- End Google Tag Manager -->
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0LJHDNWBZZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0LJHDNWBZZ');
</script>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Booking Form - AutoLux</title>
<style>
  :root{
    --bg:#071022; --card:#0b1220; --accent:#00c2a8; --muted:#9aa6b2;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }
  *{box-sizing:border-box}
  body{ margin:0; min-height:100vh; background:linear-gradient(180deg,#071022,#081428); color:#e6eef3; padding:28px; }
  .wrap{ max-width:980px; margin:24px auto; display:grid; grid-template-columns:1fr 380px; gap:22px; }
  .panel{ background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:20px; border-radius:14px; border:1px solid rgba(255,255,255,0.03);}
  h2{ margin:0 0 8px 0;}
  p.muted{ color:var(--muted); margin-top:4px; font-size:14px}
  form{ display:flex; flex-direction:column; gap:12px; margin-top:10px;}
  label{ font-size:13px; color:var(--muted)}
  input[type="text"], input[type="email"]{
    padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.05);background:transparent;color:inherit;
  }
  .btn{ background:linear-gradient(90deg,var(--accent),#3dd7ff); border:none;padding:12px;border-radius:12px;color:#042; font-weight:800; cursor:pointer; margin-top:8px;}
  .product-card{ display:flex; gap:12px; align-items:center;}
  .product-card img{ width:110px; height:70px; object-fit:cover; border-radius:10px; border:1px solid rgba(255,255,255,0.03)}
  .note{ font-size:13px; color:var(--muted); margin-top:8px; }
  .small{ font-size:13px; color:var(--muted); }
  .actions{ display:flex; gap:10px; margin-top:12px; }
  .link{ background:transparent;border:1px solid rgba(255,255,255,0.05); padding:10px 12px;border-radius:10px;color:var(--muted); cursor:pointer;}
  @media (max-width:900px){
    .wrap{ grid-template-columns:1fr; padding-bottom:40px;}
  }
</style>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P7XLQSKZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<div class="wrap">
  <section class="panel">
    <h2>Booking Details</h2>
    <p class="muted">Please fill in your details. We’ll confirm the booking and guide you through the payment.</p>

    <div id="productArea" style="margin-top:14px;"></div>

    <form id="bookingForm" onsubmit="return proceedToPayment(event)">
      <div>
        <label for="fullname">Full Name</label>
        <input id="fullname" name="fullname" type="text" required placeholder="e.g., Priya Sharma">
      </div>
      <div>
        <label for="email">Email Address</label>
        <input id="email" name="email" type="email" required placeholder="you@example.com">
      </div>

      <div class="actions">
        <button type="submit" class="btn">Proceed to Payment</button>
        <button type="button" class="link" onclick="window.location.href='index.html'">Back to Home</button>
      </div>
      <div class="note">We will save your selection locally so you can complete payment. No payment taken on this page.</div>
    </form>
  </section>

  <aside class="panel">
    <h3 style="margin:0 0 8px 0">Your Selected Car</h3>
    <div id="summary" class="small">Loading selected car…</div>

    <div style="margin-top:18px;">
      <h4 style="margin:0 0 8px 0">Need help?</h4>
      <div class="small">Chat with our support or call <strong>1800-123-456</strong>. Test drives available on request.</div>
    </div>
  </aside>
</div>

<script>
  // Load selected product
  const selectedRaw = localStorage.getItem('selectedProduct');
  let selected = selectedRaw ? JSON.parse(selectedRaw) : null;

  const productArea = document.getElementById('productArea');
  const summary = document.getElementById('summary');

  function renderProduct(){
    if(!selected){
      productArea.innerHTML = `<div class="small">No car selected. <button class="link" onclick="location.href='index.html'">Choose a car</button></div>`;
      summary.innerHTML = `<div class="small">No car selected</div>`;
      return;
    }
    productArea.innerHTML = `
      <div class="product-card">
        <img src="${selected.img}" alt="${selected.name}">
        <div>
          <div style="font-weight:700">${selected.name}</div>
          <div style="color:var(--muted); font-size:13px">${selected.desc}</div>
          <div style="margin-top:6px; font-weight:800; color:#bff7e8">${selected.price}</div>
        </div>
      </div>
    `;
    summary.innerHTML = `<div style="font-weight:700">${selected.name}</div><div class="small">${selected.price}</div>`;
  }

  renderProduct();

  function proceedToPayment(e){
    e.preventDefault();
    if(!selected){
      alert('Please select a car first.');
      return false;
    }
    const full = document.getElementById('fullname').value.trim();
    const email = document.getElementById('email').value.trim();
    if(!full || !email){ alert('Please complete the form.'); return false; }

    // Save customer details to localStorage
    localStorage.setItem('customerInfo', JSON.stringify({fullname:full, email:email, timestamp: Date.now()}));
    // navigate to payment
    window.location.href = 'payment.html';
    return false;
  }

  // Autofill fields if customerInfo exists
  const custRaw = localStorage.getItem('customerInfo');
  if(custRaw){
    try{
      const cust = JSON.parse(custRaw);
      if(cust.fullname) document.getElementById('fullname').value = cust.fullname;
      if(cust.email) document.getElementById('email').value = cust.email;
    }catch(e){}
  }
</script>
</body>
</html>
